# Chap 4. 디지털 전송

# 디지털-대-디지털 변환

- 3가지 변환 기술

- 회선 부호화
- 블록 부호화
- 뒤섞기

## 회선 부호화

- 디지털 데이터를 디지털 신호로 바꾸는 작업

- 회선 부호화(line coding)와 복호화(Decoding)

<img width="450" alt="image" src="media/Digital-transmission-img/Untitled.png">
<br>
<br>

### 신호 요소 대 데이터 요소

- 신호 요소 : 디지털 신호의 가장 짧은 단위 (전달자)

- 데이터 요소 : 데이터를 나타내는 가장 작은 단위체 비트 (bit)


<img width="700" alt="image" src="media/Digital-transmission-img/Untitled 1.png">
<br>
<br>

### **: r은 매 신호 요소당 전송되는 데이터 요소의 개수**

<br>

## 데이터 전송률 대 신호 전송률
<br>

### 데이터 전송률 (data rate) / bps

- 1초당 전송된 데이터 요소의 개수 

- 비트율
<br>
<br>

### 신호 전송률 (signal rate) / baud(보오)

- 1초당 전송된 신호 요소의 개수

- 변조율, 보오율 이라고 함
<br>
<br>

### 데이터 통신의 한가지 목적 : **신호 전송률을 낮추면서 데이터 전송률을 높이는 것**

<br>
<br>

### 데이터 전송률(N)과 신호 전송률(S)의 관계

$$
S={N\over r}
$$

$$
S_{ave}=c\times N \times (1/r)\ \  baud
$$

### Example 4.1

---

- 한 개의 신호 요소에 한 개의 데이터 요소를 전달하고 있다면,

- 비트율이 100kps이고, c가 0과 1 사이의 값이라면 보오율은 얼마?

- c의 평균 값이 1/2 이라면…

$$
S=c \times N \times(1/r)=1/2 \  \times 100,000 \  \times\ (1/1)\ = \ 50,000=50\ kbaud  
$$

---
<br>
<br>
<br>

## 나이퀴스트 정리

- 신호 L은 각 준위마다 **$log_2L$** 비트만큼의 신호를 전달할 수 있음

- 각 준위가 한 개의 신호 요소에 해당한다고 하고 (c = 1/2)로 가정하면,

$$
N_{max}=(1/2) \times\ B\ \times\ r\ =\ 2 \  \times B\ \times\ log_{2}L
$$

<br>
<br>

# 회선 부호화 오류

- 기준선 표류

    - **복호화 시 수신된 신호 세기의 평균을 측정** : **기준선**
    - 오래 지속되는 0 or 1과 같은 신호는 기준선을 표류 시킬 수 있으며, 복호화 오류를 야기

- 직류 성분

    - 주파수에 잡음이 생김

- 자기 동기화

    - 수신 신호의 복호 시 수신 비트 간격은 발신 비트 간격과 완전하게 일치해야함
    - 자기 동기화 디지털 신호는 데이터 안에 타이밍 정보를 포함 → 자기 동기화 결핍 효과 발생
    
        : 데이터가 밀림 <br>
    <img width="450" alt="image" src="media/Digital-transmission-img/Untitled 2.png">
<br>
<br>
<br>
<br>



# 회선 부호화 방식

1. 단극형 (unipolar)
    
    - 시간 축을 기준으로 전부 위 또는 아래 신호 준위값을 이용
    
2. 극형 (polar)
    
    - 시간 축의 양측 사용
    
    - 0에 대한 전압 준위는 양, 1에 대한 전압 준위는 음을 사용
    
3. 양극형 (biploar)
    
    - 양, 음 및 영의 세가지 전압 준위 사용
    
4. 다준위 (Multilevel)
    
    - L개의 서로 다른 준위를 사용하여 $L^n$개의 신호 요소를 만듬
    
5. 다중 회선 (Multitransition)
    
    - 2개 보다 많은 준위의 신호를 사용하여 **2개 이상의 규칙을 갖음**


## 단극형(Unipolar)

- 시간 축을 기준으로 전부 위 또는 아래 신호 준위의 값만 이용
<br>

### NRZ: Non-return to zero(비영복귀)

- **신호 준위가 양 전압일 때 비트 1, 음 전압일 때 비트 0**
- 부호화 신호의 준위는 항상 양 또는 음이며, 0이 되지 않으므로 NRZ
- 정규화된 전력이 극형 NRZ에 비해 2배 → 사용되지 않음

- 아래 사진은 단극형 비영복귀 (Unipolar NRZ)

<img width="450" alt="image" src="media/Digital-transmission-img/Untitled 3.png">
<br>
<br>
<br>

## 극형(Polar)

- 양과 음의 두 가지 전압 준위를 사용

- **회선의 평균 전압 준위 감소**

- **직류 성분 문제의 완화**
<br>
<br>

## 극형 비영복귀 (Polar NRZ)

<img width="600" alt="image" src="media/Digital-transmission-img/Untitled 4.png">
<br>
<br>


### NRZ-L(evel)

- 양 전압은 0, 음 전압은 비트 1을 의미(위의 예)

- **긴 스트림의 데이터를 수신했을 경우, 송신자와 클록 동기화 여부 불투명**

### NRZ-I(nvert)

- 전압 준위의 반전이 비트 1을 의미 / 1 = Change, 0 = No Change

- 전압의 변화시 비트 1, 변화가 없으면 비트 0으로 표현

- **비트 1을 만날 때마다 신호가 변화하기 때문에 동기화를 제공**

동기화 : **송신과 수신이 일치하는지 여부**

**- NRZ-L, NRZ-I 둘 다 직류 성분 문제를 갖음**

## 극형(Polar) 영복귀(RZ)

<img width="600" alt="image" src="media/Digital-transmission-img/Untitled 5.png">
<br>


- NRZ의 문제 : **송신과 수신 사이에 동기화가 되지 않을 때**, 비트의 종료와 시작을 알 수 없음

- 영복귀(RZ) : 양, 음, 0 세가지 값을 사용, 신호는 매 비트 구간에 바뀜

→ 비트 간격의 반이 지나고 나면 0으로 돌아옴

→ 비트 1 : 0에 대한 양으로 표현, 비트 0 : 0에 대한 음으로 표현


<br>

### 단점 : 한 비트를 부호화 하기 위해 두 번의 신호 변화 필요하여 많은 대역폭 차지

→ 복잡하므로 사용하지 현재는 사용하지 않음
<br>
<br>

## 이상(Biphase) : 맨체스터와 차분 맨체스터

### 맨체스터

- 동기화를 달성하는 동시에 해당 비트를 표현하기 위해 각 **비트 간격 중간에서 신호를 반전**

- **비트 1 : 음 - 대 - 양 전이, 비트 0 : 양 - 대 - 음 전이**

- 두 가지 전이를 통해 RZ와 같은 수준의 동기화를 달성

### 차분 맨체스터 부호화 → **멘체스터 + NRZ-I**

<img width="600" alt="image" src="media/Digital-transmission-img/Untitled 6.png">
<br>


- 비트 간격 중간에서의 반전은 동기화를 위해 사용

- 비트 간격 시작점에서 **전이 여부로 비트를 식별** / 0 = Change, 1 = No Change

- 비트 0 : 비트 시작점에서 전이가 있을 경우(2번의 신호 변화)

- 비트 1 : 비트 시작점에서 전이가 없을 경우(1번의 신호 변화)

### 맨체스터와 차분 맨체스터 부호화에서 비트 중간의 반전은 동기화를 위해 사용됨

### 맨체스터와 차분 맨체스터 부호화의 대역폭은 NRZ의 두 배이다.
<br>
<br>

## 양극형(Bipolar): AMI와 가삼진수(Pseudoternary)

→ 서로 반대의 역할을 한다.

<img width="600" alt="image" src="media/Digital-transmission-img/Untitled 7.png">
<br>


### AMI(Alternate mark inversion) : 교대로 나타나는 반전되는 1

- 비트 0 : 중립의 0 전압, 비트 1 : 교대되는 양과 음의 전압

- 장거리 통신에 사용되거나 연속된 0이 길게 지속될 경우 동기화 문제 발생

### Pseudoternary : 가 삼진수

- 비트 1 : 중립의 0 전압, 비트 0 : 교대되는 양과 음의 전압

## 다준위 방식(Multilevel Schemes)

- n개의 신호 요소 패턴을 사용하여 m개의 데이터 요소 패턴을 표현

- 단위 보오 당 비트 수 증가

### mBnl 부호화

- m : 2진수 패턴(데이터)의 길이

- B : 2진수

- n : 신호 패턴의 길이

- L : 신호 준위의 수, 숫자 대신 문자 사용 / 2진 : B, 3진 : T, 4진 : Q

- mBnl 방식에서는, m개의 데이터 요소의 패턴이 $2^m\le L^n$가 되는 n개의 신호 패턴으로 부호화

## 다준위 방식 : 2B1Q

<img width="450" alt="image" src="media/Digital-transmission-img/Untitled 8.png">
<br>


- 2B1Q (2 binary, 1 quaternary)

- 1개의 신호 요소에 2개의 데이터(bit) 준위는 4개

- 2개의 비트 패턴을 4개의 전압 준위 중 각각으로 부호화

- DSL에서 기술에서 가입자 전화 회선을 사용하는 고속 인터넷 접속 제공에 사용

## 다준위 방식 : 8B6T

<img width="700" height="250" alt="image" src="media/Digital-transmission-img/Untitled 9.png">
<br>


- 8B6T (8 binary, 6 ternary)

- 8비트 패턴을 6개의 신호 요소로 나타내는 것으로 신호는 3개의 준위를 갖음

- $2^8=256$개의 데이터 패턴과 $3^6=729$개의 신호 패턴

- **사용되지 않는 신호 패턴은 동기화나 오류 검색에 사용**

- **평균 전압을 계산하여 직류 균형을 위해 Inverted pattern을 사용**

## 다준위 방식 : 4D-PAM5

<img width="700" height="350" alt="image" src="media/Digital-transmission-img/Untitled 10.png">
<br>

- 4D-PAM5(4차원 5준위 펄스 진폭 변조)

- 4D : 데이터가 4개의 회선으로 동시에 전송

- 5개의 준위 : -2, -1, 0, 1, 2 (0은 오류 검색에 활용)

- 1G bps LAN에 사용 (동축 케이블)

## 다중회선 전송 : MLT-3

<img width="500" alt="image" src="media/Digital-transmission-img/Untitled 11.png">
<br>


### MLT-3 준위 규칙

1. 다음 비트가 0이면 준위 변화 없음
2. 다음 비트가 1이고 **현재 준위가 0이 아니면** 다음 준위는 0
3. 다음 비트가 1이고 **현재 준위가 0이면** 마지막으로 0이 아니었던 준위의 역

### Why MLT-3?

- MLT-3 방식의 신호 모양이 요구 대역폭을 줄임

→ 신호 패턴인 +V0-V0이 매 4비트마다 반복

- 구리선(동축 케이블)에 100Mbps의 데이터 전송 가능 방식 (LAN)
<br>
<br>

# 블록 부호화

- 동기화를 확보하기 위해서 여분의 비트가 필요

- 추가 bit를 이용

- 에러 검출 및 데이터 전송에 목적을 가짐

## 블록 부호화 : 4B/5B

- NRZ-I의 문제인 동기화 문제를 해결하기 위해 4B/5B 부호화를 이용

- 연속되는 0이 생기지 않도록 비트 스트림을 수정

→ 1개 이상의 0으로 시작하지 않고, 2개 이상의 0으로 끝나지 않음

- 복호화 시 추가된 bit 제거 후 판단

## 블록 부호화 : 8B/10B

- 5B/6B와 3B/4B를 합한 것

<img width="600" alt="image" src="media/Digital-transmission-img/Untitled 12.png">
<br>
<br>
<br>
<br>

# 아날로그-대-디지털 변환

## 펄스 코드 변조 (Pulse Code Modulation)

- PCM

- 아날로그 신호를 디지털 데이터로 바꾸기 위해 널리 사용되는 기법

    1. Sampling(채집) : 아날로그 신호를 **채집**
    2. Quantization(계수화) : 채집된 신호를 정수값으로 **계수화**
    3. Encoding(부호화) : 계수화된 값을 비트 스트림으로 **부호화**

<img width="700" alt="image" src="media/Digital-transmission-img/Untitled 13.png">
<br>

### Sampling(채집)

- 형태에 변화가 없게 적정 간격으로 채집을 진행

- 나이퀴스트 정리에 의하면, 채집율은 신호에 포함된 **최대 주파수의 최소한 두 배**가 되어야 함

### Quantization(계수화)

- 채집 결과로 얻은 것은 신호의 **최대 진폭과 최소 진폭 사이의 값들**

    1. 원래의 아날로그 신호는 $V_{min}$과 $V_{max}$ 사이의 진폭값을 순간적으로 갖는다고 가정
    2. 전체 영역을 각각 높이 $\Delta$(델타)의 $L$개 구간으로 나눔
    3. 각 구간의 **중간점에 0부터 $L-1$까지의 계수화된 값을 지정**
    4. 채집된 신호의 진폭값을 **계수화된 값의 근사값으로 지정**

<img width="700" alt="image" src="media/Digital-transmission-img/Untitled 14.png">
<br>
<br>
<br>
<br>

### 계수화 준위

- 구간의 개수, 준위의 개수는 아날로그 신호의 진폭 구간과 얼마나 정확하게 복구하는 가에 달려있음

- 음성을 디지털화 하는 경우 L은 256 → 낮은 값일 수록 계수화 오차가 커짐

<br>

 

### 계수화 오차

$$
SNR_{dB}=6.02n_b+1.76dB
$$

→ $n_b$는 표본당 비트 수

→ **준위의 수가 증가하면 SNR이 증가**

### Encoding(부호화)

- 각 표본이 계수화되고 표본당 비트수가 정해진 후, 각 표본이 $n_b$비트의 부호로 바뀌는 것

- 계수화 준위 개수가 $L$이면 비트 수는 $n_b=log_2L$

## 델타 변조(DM, Delta Modulation)

- PCM의 복잡도를 낮추기 위해 개발된 기술

- 직전 표본 값과 차이점을 찾음

- 각 채집 구간마다 아날로그 신호의 값과 직전 계단 신호의 값을 비교

<br>
<br>


# 전송 방식

## 병렬 전송

- 거의 사용 X

- 가격이 비싸고, 짧은 거리로 제한

## 직렬 전송

- 통신하는 두 장치간 하나의 채널만 필요

- 송신자와 전선 사이 및 전선과 수신자 사이의 인터페이스에서 **변환 장치 필요**

- **비동기식 또는 동기식으로 구성**

## 비동기식 전송

- 8비트 단위를 맞추기 위해 앞 뒤에 2개의 추가 비트를 구성

→ 직렬 전송에서는 위 방법은 큰 의미가 없음

→ 보내는 데이터에 앞 뒤로 붙이는 것은 엄청 큰 부담

## 동기식 전송

- 다수의 바이트로 구성

- 바이트와 다음 바이트 사이의 간격이 없음

- 수신자가 수신된 바이트를 8비트 단위의 그룹으로 분리

- **데이터 링크 계층에서 모든 작업이 이루어짐**

- **8비트 단위의 그룹을 분리**

## 등시식 전송

- 실시간 음성이나 화상 전송

- 전체 비트 스트림의 동기화로, **정해진 시간에 데이터의 도착을 보장**

→ 전체 비트 스트림이 동기화 되어야 함

- **프레임 전체를 한번에 뽑아냄**

<img width="700" alt="image" src="media/Digital-transmission-img/Untitled 15.png">
<br>
<br>
<br>
<br>